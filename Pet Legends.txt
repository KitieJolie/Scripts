local library = loadstring(game:HttpGet(('https://gist.githubusercontent.com/KitieJolie/f428868c6b5ae647c7e3e8b1d923df98/raw/933305de8033685e4c14a79d38f9fb6ca17b1a49/UiLib')))()
local w = library:CreateWindow("Pet Legends")
local b = w:CreateFolder("AutoFarm")
local f = w:CreateFolder("AutoBuy")
local e = w:CreateFolder("Mix")
local u = w:CreateFolder("Credits")
Eggs = {}
SelectedEgg = ""
for i,v in pairs(game:GetService("Workspace").Eggs:GetChildren()) do
    if string.find(v.Name,"Egg") then
        table.insert(Eggs,v.Name)
    end
end

b:Toggle("AutoCash",function(bool)
    shared.toggle = bool
    AutoCash = bool
end)

f:Dropdown("Select Egg",Eggs,true,function(a)
    SelectedEgg = a
end)
 
f:Toggle("Egg",function(bool)
    shared.toggle = bool
    Egg = bool
end)

e:Toggle("AntiAfk",function(bool)
    shared.toggle = bool
    AntiAfk = bool
end)

--Credits
u:Button("KitieJolie#1158",function()
    setclipboard("KitieJolie#1158")
end)

u:Button("Discord Server",function()
    setclipboard("https://discord.gg/ZEM4WKKKVU")
end)

game:GetService('RunService').Stepped:connect(function()
    spawn(function()
        if AntiAfk == true then
            local bb=game:service'VirtualUser'
            bb:CaptureController()
            bb:ClickButton2(Vector2.new())
        end
    end)
end)

function ClosestPart()
    local dist = math.huge
    local target = nil
    for i,v in pairs(game:GetService("Workspace").money:GetChildren()) do
        local magnitude = (v.Root.Position - game:GetService("Players").LocalPlayer.Character.Head.Position).magnitude
        if magnitude < dist then
            dist = magnitude
            target = v.Name
        end
    end
    return target
end

function ClosestPart1()
    local dist = math.huge
    local target = nil
    for i,v in pairs(game:GetService("Workspace").Spawners:GetChildren()) do
        local magnitude = (v.Position - game:GetService("Players").LocalPlayer.Character.Head.Position).magnitude
        if magnitude < dist then
            dist = magnitude
            target = v.Name
        end
    end
    return target
end

spawn(function()
    while wait() do
        if AutoCash == true then
            pcall(function()
                allow = true
                remember = ClosestPart()
                repeat wait()
                    if allow == true then
                        pcall(function()
                            number = 0
                            for i,v in pairs(game:GetService("Players").LocalPlayer.PlayerGui.GameGui.Pets.List:GetChildren()) do
                                if v:FindFirstChild("Background") then
                                    if v.Background.BackgroundColor3 == Color3.fromRGB(85, 255, 0) then
                                        number = number + 1
                                    end
                                end
                            end
                            for i=1,number do
                                pcall(function()
                                    allow = false
                                    local args = {
                                        [1] = game:GetService("ReplicatedStorage").Currency[ClosestPart1()][remember],
                                        [2] = false,
                                    }
                                    game:GetService("ReplicatedStorage").Events.GiveTarget:InvokeServer(unpack(args))
                                end)
                            end
                        end)
                    end
                until not game:GetService("Workspace").money:FindFirstChild(remember) or AutoCash == false
            end)
        end
    end
end)

spawn(function()
    while wait() do
        if Egg == true then
            game:GetService("ReplicatedStorage").Events.BuyEgg:InvokeServer(SelectedEgg,1)
        end
    end
end)